<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.web.mapper.ProductsMapper">

    <select id="selectRespList" resultType="com.web.domain.Resp.ProductsResp">
        select
        t1.`id`,
        t1.`products_name`,
        t1.`brand`,
        t1.`description`,
        t1.`price`,
        t1.`stock_quantity`,
        t1.`image_url`,
        t1.`create_time`,
        t1.`update_time`
        from products t1
        <where>
            <if test="req.productsName != null and req.productsName != ''">
                and t1.products_name like concat('%', #{req.productsName}, '%')
            </if>
            <if test="req.brand != null and req.brand != ''">
                and t1.brand like concat('%', #{req.brand}, '%')
            </if>
            <if test="req.price != null">
                and t1.price = #{req.price}
            </if>
            <if test="req.stockQuantity != null">
                and t1.stock_quantity = #{req.stockQuantity}
            </if>
            <if test="req.createTime != null and req.createTime != ''">
                and DATE_FORMAT(t1.create_time, '%Y-%m-%d') = #{req.createTime}
            </if>
            <if test="req.updateTime != null and req.updateTime != ''">
                and DATE_FORMAT(t1.update_time, '%Y-%m-%d') = #{req.updateTime}
            </if>
        </where>
    </select>
</mapper>